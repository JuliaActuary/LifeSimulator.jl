import yaml

def read_yaml_file(filename):
    with open(filename, 'r') as stream:
        try:
            return yaml.safe_load(stream)
        except yaml.YAMLError as exc:
            print(exc)

def generate_readme():
    julia_yaml = read_yaml_file('Julia/benchmark_results.yaml')
    python_yaml = read_yaml_file('Python/benchmark_results.yaml')
    r_yaml = read_yaml_file('R/benchmark_results.yaml')
    readme = open('README.md', 'w')
    # write the header and description
    readme.write('# Benchmarking \n\n')
    readme.write('The below results are generated by the benchmarking scripts in the folders for each language. ')
    readme.write('These scripts are run automatically by GitHub Actions and populate the results below. \n\n')
    # write a yaml codeblock containing all the results
    readme.write('```yaml \n')
    readme.write(yaml.dump(julia_yaml, allow_unicode=True))
    readme.write(yaml.dump(python_yaml))
    readme.write(yaml.dump(r_yaml))
    readme.write('```')
    readme.close()

if __name__ == '__main__':
    generate_readme()
